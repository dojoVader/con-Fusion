<!--The content below is only a placeholder and can be replaced.-->
<!-- <mat-toolbar color="primary">
  <span>Ristorante Con Fusion</span>
</mat-toolbar>

<app-menu></app-menu> -->
<form [formGroup]="customerMappingForm">
  <div class="container" formArrayName="allMappings">
    <!-- <button (click)="save()">Save</button> -->
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <ng-container matColumnDef="customerName">
        <th mat-header-cell *matHeaderCellDef> AppRiver Customers</th>
        <td mat-cell *matCellDef="let element"> {{element.customerName}} </td>
      </ng-container>

      <!-- Connectwise Company Column -->
      <ng-container matColumnDef="mappings">
        <th mat-header-cell *matHeaderCellDef>ConnectWise Companies</th>
        <td mat-cell *matCellDef="let element; let i = index">
          <div>
            <div [formGroupName]="i">

                <input type="text" placeholder="ConnectWise Company Name" [matAutocomplete]="auto" #input>
           
    
                <mat-autocomplete  #auto="matAutocomplete" 
                  (optionSelected)="setItem($event.option, i, input)">
                  <mat-option *ngFor="let connectWiseCompany of connectWiseCompanies" [value]="connectWiseCompany">
                    {{connectWiseCompany.name}}
                  </mat-option>
                </mat-autocomplete>
                <button style=" position: relative; left: 200px;" (click)="removeItem($event, i,input)"><em
                    class="fa fa-minus-circle"></em></button>


            </div>
          </div>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
  <div>

    <button (click)="log()">Log</button>
    {{customerMappingForm.value | json}}
  </div>
</form>